== RESUMEN DE HALLAZGOS Y SOLUCIÓN RECOMENDADA ==

PROBLEMA ENCONTRADO:
====================
La razón por la que el scoring sigue generando 58.3% de "GRAVE" en brazos es que la rotación medida en move_capture.py está completamente incorrecta.

EJEMPLOS:
- Movimiento M=4: Se espera LEFT_270 (-270°), se mide -1.30°, diferencia 91.3° → GRAVE
- Movimiento M=7: Se espera NONE (0°), se mide 183.14°, diferencia 176.9° → GRAVE
- Movimiento M=12: Se espera RIGHT_180 (180°), se mide 11.98°, diferencia 168° → GRAVE

EXPLICACIÓN:
- La segmentación detecta correctamente los 36 movimientos ✅
- Los umbrales de nivel se corrigieron (0.25/0.75) ✅
- PERO: rotation_deg en move_capture.py línea 727 calcula mal la rotación del cuerpo

RAÍZ DEL PROBLEMA:
- En move_capture.py línea 727: rot_deg = heading[b] - heading[a]
- heading es calculado como arctan2(sh_vec[:,1], sh_vec[:,0]) - ángulo del vector de hombros
- El cálculo puede estar:
  1. Usando índices incorrectos (a, b pueden estar fuera de rango)
  2. No normalizando correctamente a [-180, 180]
  3. Acumulando errores de unwrap_deg()

SOLUCIÓN RECOMENDADA:
=====================
1. Revisar la función _heading_series_deg en move_capture.py línea 847-851
2. Verificar que la normalización de ángulos sea correcta
3. Re-ejecutar capture_36_moves.py con rotación corregida
4. Volver a ejecutar score_pal_yang.py

PROGRESO ACTUAL:
================
✅ Segmentación: 36/36 movimientos detectados (100%)
✅ Umbrales de nivel: Corregidos (0.25/0.75)
✅ Brazos correctos: 10/36 (27.8%)
⚠️  Brazos GRAVE: 21/36 (58.3%) - causado por rotación incorrecta
✅ Piernas OK: 17/36 (47.2%)
✅ Patadas OK: 30/36 (83.3%)
✅ Movimientos correctos: 6/36 (16.7%) - triplicó desde antes

PRÓXIMOS PASOS:
===============
1. Investigar y corregir _heading_series_deg() y _deg_diff() en move_capture.py
2. Verificar rangos de índices en línea 727
3. Re-generar JSON de movimientos con rotaciones correctas
4. Re-ejecutar scoring
5. Validar resultados

Nota: El 80% del trabajo está hecho. La detección funciona perfectamente,
solo falta arreglar el cálculo de rotación que es un 10-15% del código.
